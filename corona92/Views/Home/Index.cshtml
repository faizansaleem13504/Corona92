@using corona92.Models
@model List<covidCase>

@{
    int countConfirmed = 0;
    int countDeaths = 0;
    int countRecovered = 0;
}
@{
    ViewData["Title"] = "Home Page";
}
<!DOCTYPE html>
<html>
<head>

    <!--Start Including Map Related Links-->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"
          integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
          crossorigin="" />
    <!-- Make sure you put this AFTER Leaflet's CSS -->
    <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"
            integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=="
            crossorigin=""></script>
    <!-- CDN: load the latest CARTO.js version -->

    
    <script src="https://libs.cartocdn.com/carto.js/v4.2.0/carto.min.js"></script>
    <link href="https://carto.com/developers/carto-js/examples/maps/public/style.css" rel="stylesheet">
    <script src="~/js/site.js" type="text/javascript"></script>
    <!--End Including Map Related-->
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
    <script>
        function myFunction(imgs) {
            var expandImg = document.getElementById("expandedImg");
            var imgText = document.getElementById("imgtext");
            expandImg.src = imgs.src;
            imgText.innerHTML = imgs.alt;
            expandImg.parentElement.style.display = "block";
        }
    </script>
    <!--Start of Tawk.to Script-->
    <script type="text/javascript">
        var Tawk_API = Tawk_API || {}, Tawk_LoadStart = new Date();
        (function () {
            var s1 = document.createElement("script"), s0 = document.getElementsByTagName("script")[0];
            s1.async = true;
            s1.src = 'https://embed.tawk.to/5e753e2beec7650c3321901a/default';
            s1.charset = 'UTF-8';
            s1.setAttribute('crossorigin', '*');
            s0.parentNode.insertBefore(s1, s0);
        })();
    </script>
    <!--End of Tawk.to Script-->
    <style>
        body {
            background: #bfffbf;
            margin-top: 7px;
            margin-bottom: 7px;
        }

        .apply {
            font-size: 3.75rem;
            text-align: center;
        }
    </style>
    <script>
        function showMapWrapper() {
            showMap(@Html.Raw(Json.Serialize(Model)));
        }
    </script>
</head>

<body onload="showMapWrapper()">
    @{
        foreach (var cases in Model)
        {
            if (@cases.confirmed != 0 && cases.latitude != 0)
            {
                countConfirmed = countConfirmed + cases.confirmed;
                countRecovered = countRecovered + cases.recovered;
                countDeaths = countDeaths + cases.deaths;
            }
            countConfirmed = cases.confirmed;
            countRecovered = cases.recovered;
            countDeaths = cases.deaths;
        }
    }
    <div class="container">
        <marquee behavior="scroll" direction="left" style="font-size:small">DISCLAIMER : The information published is taken from Dawn News and cross checked with different other sources (NEWS Channels and government bodies official statements). As in some cases, the Provincial and Federal stats do not match, so we follow the INFORMATION provided by the Provincial Government</marquee>

        <div class="row">
            <div class="col-12">
                <div class="card">
                    <div class="card-body p-0">
                        <div class="row p-5">
                        </div>
                        <h1 class="apply">COVID-19 Pakistan</h1>
                        <div class="d-flex flex-row-reverse bg-dark text-white p-4">
                            <div class="py-3 px-5 text-right">
                                <div class="mb-2 " style="font-size:1vw;">Total Confirmed Cases</div>
                                <div class="h2 font-weight-light">@countConfirmed</div>
                            </div>

                            <div class="py-3 px-5 text-right">
                                <div class="mb-2" style="font-size:1vw;">Total Deaths</div>
                                <div class="h2 font-weight-light">@countDeaths</div>
                            </div>

                            <div class="py-3 px-5 text-right">
                                <div class="mb-2" style="font-size:1vw;">Total Recovered</div>
                                <div class="h2 font-weight-light">@countRecovered</div>
                            </div>
                        </div>
                        <div class="row p-5">
                            <div class="col-md-12">
                                <table class="table" style="font-size:medium;width:auto" >
                                    <thead>
                                        <tr>
                                            <th class=" text-uppercase small font-weight-bold">City</th>
                                            <th class=" text-uppercase small font-weight-bold">Province</th>
                                            @* <th class="text-uppercase small font-weight-bold">Latitude</th>
                                            <th class=" text-uppercase small font-weight-bold">Longitude</th>*@
                                            <th class="text-uppercase small font-weight-bold">Confirmed Cases</th>
                                            <th class=" text-uppercase small font-weight-bold">Deaths</th>
                                            <th class=" text-uppercase small font-weight-bold">Recovered</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @{
                                            foreach (var cases in Model)
                                            {
                                                if (@cases.confirmed != 0 && cases.latitude != 0)
                                                {
                                                    <tr>
                                                        <td>@cases.city</td>
                                                        <td>@cases.province</td>
                                                        <td>@cases.confirmed</td>
                                                        <td>@cases.deaths</td>
                                                        <td>@cases.recovered</td>
                                                    </tr>
                                                }
                                            }
                                        }
                                        @*uncomment block below TO PLACE DATA*@
                                        @*<tr>
                                            <td>@province</td>
                                            <td>@city</td>
                                            <td>@latitude</td>
                                            <td>@longitude</td>
                                            <td>@confirmed cases</td>
                                            <td>@deaths</td>
                                            <td>@recovered</td>
                                        </tr>


                                        *@
                                    </tbody>
                                </table>
                            </div>
                        </div>


                    </div>
                </div>
            </div>
        </div>
    </div>

    <br /><br />

    <!--MAPS -->
    <div id="mapid" style="width: 600px; height: 500px;margin:auto">Map Viewer</div>
    <!-- MAP END -->
</body>

</html>